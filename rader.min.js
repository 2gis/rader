'use strict';(function(A,E){function M(f){function F(a,c){var b=a[m.clientX]||(((a.originalEvent||a).touches||[])[0]||{})[m.pageX];if(c)var d=c.getBoundingClientRect(),b=b-d[m.start];return b}function A(a){if(a)p(document).on("selectstart.rader",function(){return!1});else p(document).off("selectstart.rader")}function B(a){return Math.min.apply(Math,a)}function G(a){100<a&&(a=100);0>a&&(a=0);return a}function n(a){null==H[a]&&(H[a]=G(100*((a-w)/N)));return H[a]}function x(a){null==I[a]&&(I[a]=a/100*
N+w);return I[a]}function O(a){var c=h[0],b=h[h.length-1];if(!h)return a;for(var d=0;l[d+1]&&!(a>=l[d]&&a<=l[d+1]);)d++;var e=l[d],g=l[d+1]||e,q=h[d],d=h[d+1]||q;0>=g-e&&(g=J,e=w);a="log"==f.scale?Math.exp((a-e)/(g-e)*(Math.log(d)-Math.log(q))+Math.log(q)):(a-e)/(g-e)*(d-q)+q;return a<c?c:a>b?b:a}function W(a){var c=l[0],b=l[l.length-1];if(!l)return a;for(var d=0;h[d+1]&&!(a>=h[d]&&a<=h[d+1]);)d++;d==h.length-1&&d--;var e=h[d],g=h[d+1],q=l[d],d=l[d+1];a="log"==f.scale?(Math.log(a)-Math.log(e))/(Math.log(g)-
Math.log(e))*(d-q)+q:(a-e)/(g-e)*(d-q)+q;return a<c?c:a>b?b:a}function P(a,c,b){var d=a,e,f,g=-1,h=1/0;c=c||l;for(var k=0;k<c.length;k++)f="pc"==b?c[k]:n(c[k]),e=Math.abs(f-a),e<h&&(d=f,h=e,g=k);return{index:g,b:d}}function X(a,c){var b,d,e,g=1/0,k=a;b=P(a).b;var h=100*f.stickingRadius/u;e=Math.abs(b-a);if(e>h)return a;for(var m=0;m<l.length;m++)b=n(l[m]),d=Math.abs(b-a),b*c>a*c&&d<g&&(g=d,k=b);if(g<h)return k;if(g>=h)return a=G(a-e*c+h*c),Math.abs(k-a)<h?k:a}function C(a,c,b){var d;if("init"==Q)d=
1;else{d=e[a]||0;if(b>d)d=1;else if(b<d)d=-1;else return!1;b=G(b);a!=c&&(b=X(b,d))}var g=P(b).b,h=100*f.stickingRadius/u;g!==E&&g!==b&&Math.abs(g-b)<h&&(!R&&f.transCls&&(r(y).addClass(f.transCls),R=setTimeout(function(){r(y).removeClass(f.transCls);R=E},500)),b=g);g=100*f.bumpRadius/u;e[c+1*d]!==E&&(e[c+1*d]-b<g&&0<d||b-e[c+1*d]<g&&0>d)&&(a=C(a,c+1*d,b+d*g),b*d>(a-g*d)*d&&(b=X(a-g*d,-d)));e[c]=b;a={};a[m.start]=e[c]+"%";r(D[c]).css(a);return b}function K(a){if(f.pointInRangeCls){var c=z.slice(),b;
for(b=0;b<L.length;b++)n(l[b])>=e[0]&&n(l[b])<=e[e.length-1]?z[b]=1:z[b]=0;for(b=0;b<z.length;b++)if(z[b]!=c[b]||a)z[b]?r(L[b]).addClass(f.pointInRangeCls):r(L[b]).removeClass(f.pointInRangeCls)}a={};a[m.start]=B(e)+"%";a[m.size]=Math.max.apply(Math,e)-B(e)+"%";r(Y).css(a);if(f.onUpdate)f.onUpdate({minPos:B(e),maxPos:Math.max.apply(Math,e),minVal:x(B(e)),maxVal:x(Math.max.apply(Math,e))})}function S(a,c){if(null!=a){var b=(a-Z)*(100/u);a=n(k[s])+b;for(b=0;b<e.length;b++)T[b]=e[b];C(s,s,G(a))}a:if(e.length!=
T.length)b=!1;else{for(b=0;b<e.length;b++)if(e[b]!==T[b]){b=!1;break a}b=!0}b&&!c||K(c)}function $(){var a=B(e),c=Math.max.apply(Math,e),b=O(x(a)),d=O(x(c));f.collapseVals&&c-a<100*f.bumpRadius/u+1E-5&&(100==c?b=d:0==a?d=b:e[s]===a?d=b:b=d);return{minPos:a,maxPos:c,minVal:b,maxVal:d}}function U(){f.move&&f.move($())}function aa(){u=y[m.a];H=[];I=[];var a,c;for(c=0;c<l.length;c++)a={},a[m.start]=n(l[c])+"%",r(L[c]).css(a);for(c=0;c<k.length;c++)a={},e[c]=n(k[c]),a[m.start]=e[c]+"%",r(D[c]).css(a);
c=n(k[0]);var b=n(k[k.length-1]);a={};a[m.start]=c+"%";a[m.size]=Math.abs(b-c)+"%";r(Y).css(a)}function V(){for(var a=0,c=k.length;a<c;a++)k[a]=x(e[a])}var M=this,N,u,ba=f.direction||"-",m=ca[ba],g,r,Z,s=-1,k=[],e=[],T=[],z=[];Q="init";this.elements={};r=f.dom||p;var y=f.root[0],da=f.track,Y=f.trackActive,L=f.points,D=f.runners;g={stickingRadius:0,bumpRadius:D[0][m.offset],points:[],pointsPos:[0,10],runnersPos:[]};for(var v in g)f[v]===E&&(f[v]=g[v]);var l=f.pointsPos,t=f.runnersPos;v=f.runnersVal;
var w,J,h=f.values;w=l[0];J=l[l.length-1];h||(h=l);for(g=0;g<h.length;g++)h[g]=+h[g];if(v&&!t.length)for(g=0;g<v.length;g++)t[g]=W(v[g]);t.length||(t=[w,J]);N=Math.abs(J-w);var H=[],I=[],R;p(document).on("mouseup.rader blur.rader touchend.rader",function(){-1!=s&&(V(),f.change&&f.change($()),A(1));s=-1});p(document).on("mousedown.rader touchstart.rader",function(a){Z=F(a)});p(document).on("mousemove.rader touchmove.rader",function(a){-1!=s&&(a=F(a),S(a,0),U())});if(f.click)p(da||y).on("click.rader",
function(a){for(var c,b=0;b<f.d.length;b++)c=c||a.target==f.d[b];c||(c=100*(F(a,this)/this[m.a]),b=P(c,e,"pc"),C(b.index,b.index,c),a=F(a),S(a,1),V(),U())});this.pos=function(a,c){if(null!=c){var b=n(c);C(a,a,b);V();K(1)}return k[a]};this.val=function(a,c){if(null!=c){var b=W(c),b=n(b);C(a,a,b);for(b=0;b<e.length;b++)k[b]=x(e[b]);K(1)}return O(k[a])};this.invalidate=function(){aa();K(1);U()};this.dispose=function(){p(document).off("rader");p(D).off("rader")};for(g=0;g<t.length;g++)p(D[g]).on("mousedown.rader touchstart.rader",
function(a){return function(c){2!=c.button&&(c.preventDefault(),A(),s=a)}}(g));(function(){u=y[m.a];k=t.slice();for(var a=0;a<t.length;a++)e[a]=n(k[a]);for(a=0;a<t.length;a++)M.pos(a,k[a]),e[a]=n(k[a])})();aa();S(null,1);Q="ready";p(y)[0].setAttribute("data-rader-inited",ba);return this}var p=A.$,Q,ca={"-":{start:"left",c:"offsetLeft",a:"clientWidth",offset:"offsetWidth",size:"width",clientX:"clientX",pageX:"pageX"},"|":{start:"top",c:"offsetTop",a:"clientHeight",offset:"offsetHeight",size:"height",
clientX:"clientY",pageX:"pageY"}};A.$.fn.rader=function(f){f=f||{};f.root=f.root||this;return new M(f)}})(window);
