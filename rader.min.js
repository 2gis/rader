'use strict';(function(z,w){function K(g){function z(a){return a.clientX||(((a.originalEvent||a).touches||[])[0]||{}).pageX}function Q(a){if(a)q(document).on("selectstart.rader",function(){return!1});else q(document).off("selectstart.rader")}function A(a){return Math.min.apply(Math,a)}function C(a){100<a&&(a=100);0>a&&(a=0);return a}function n(a){D[a]===w&&(D[a]=C(100*((a-x)/L)));return D[a]}function t(a){E[a]===w&&(E[a]=a/100*L+x);return E[a]}function M(a){var d=k[0],b=k[k.length-1];if(!k)return a;
for(var c=0;l[c+1]&&!(a>=l[c]&&a<=l[c+1]);)c++;var e=l[c],h=l[c+1]||e,f=k[c],c=k[c+1]||f;0>=h-e&&(h=F,e=x);a="log"==g.scale?Math.exp((a-e)/(h-e)*(Math.log(c)-Math.log(f))+Math.log(f)):(a-e)/(h-e)*(c-f)+f;return a<d?d:a>b?b:a}function R(a){var d=l[0],b=l[l.length-1];if(!l)return a;for(var c=0;k[c+1]&&!(a>=k[c]&&a<=k[c+1]);)c++;c==k.length-1&&c--;var e=k[c],h=k[c+1],f=l[c],c=l[c+1];a="log"==g.scale?(Math.log(a)-Math.log(e))/(Math.log(h)-Math.log(e))*(c-f)+f:(a-e)/(h-e)*(c-f)+f;return a<d?d:a>b?b:a}
function S(a){for(var d=a,b,c,e=9999,g=0;g<l.length;g++)c=n(l[g]),b=Math.abs(c-a),b<e&&(d=c,e=b);return d}function T(a,d){var b,c,e,f=1/0,h=a;b=S(a);var k=100*g.stickingRadius/u;e=Math.abs(b-a);if(e>k)return a;for(var m=0;m<l.length;m++)b=n(l[m]),c=Math.abs(b-a),b*d>a*d&&c<f&&(f=c,h=b);if(f<k)return h;if(f>=k)return a=C(a-e*d+k*d),Math.abs(h-a)<k?h:a}function G(a,d,b){var c;if("init"==N)c=1;else{c=e[a]||0;if(b>c)c=1;else if(b<c)c=-1;else return!1;b=C(b);a!=d&&(b=T(b,c))}var f=S(b),h=100*g.stickingRadius/
u;f!==w&&f!==b&&Math.abs(f-b)<h&&(!O&&g.transCls&&(m(H).addClass(g.transCls),O=setTimeout(function(){m(H).removeClass(g.transCls);O=w},500)),b=f);f=100*g.bumpRadius/u;e[d+1*c]!==w&&(e[d+1*c]-b<f&&0<c||b-e[d+1*c]<f&&0>c)&&(a=G(a,d+1*c,b+c*f),b*c>(a-f*c)*c&&(b=T(a-f*c,-c)));e[d]=b;a={};a[p.start]=e[d]+"%";m(B[d]).css(a);return b}function I(a){if(g.pointInRangeCls){var d=y.slice(),b;for(b=0;b<J.length;b++)n(l[b])>=e[0]&&n(l[b])<=e[e.length-1]?y[b]=1:y[b]=0;for(b=0;b<y.length;b++)if(y[b]!=d[b]||a)y[b]?
m(J[b]).addClass(g.pointInRangeCls):m(J[b]).removeClass(g.pointInRangeCls)}a={};a[p.start]=A(e)+"%";a[p.size]=Math.max.apply(Math,e)-A(e)+"%";m(U).css(a);if(g.onUpdate)g.onUpdate({minPos:A(e),maxPos:Math.max.apply(Math,e),minVal:t(A(e)),maxVal:t(Math.max.apply(Math,e))})}function V(a,d){if(a){for(var b=(z(a)-W)*(100/u),b=n(f[r])+b,c=0;c<e.length;c++)P[c]=e[c];G(r,r,C(b))}a:if(e.length!=P.length)b=!1;else{for(b=0;b<e.length;b++)if(e[b]!==P[b]){b=!1;break a}b=!0}b&&!d||I(d)}function X(){var a=A(e),
d=Math.max.apply(Math,e),b=M(t(a)),c=M(t(d));g.collapseVals&&d-a<100*g.bumpRadius/u+1E-5&&(100==d?b=c:0==a?c=b:e[r]===a?c=b:b=c);return{minPos:a,maxPos:d,minVal:b,maxVal:c}}function Y(){g.move&&g.move(X())}function Z(){u=H[p.a];D=[];E=[];var a,d;for(d=0;d<l.length;d++)a={},a[p.start]=n(l[d])+"%",m(J[d]).css(a);for(d=0;d<f.length;d++)a={},e[d]=n(f[d]),a[p.start]=e[d]+"%",m(B[d]).css(a);d=n(f[0]);var b=n(f[f.length-1]);a={};a[p.start]=d+"%";a[p.size]=Math.abs(b-d)+"%";m(U).css(a)}var K=this,L,u,p={start:"left",
a:"clientWidth",offset:"offsetWidth",size:"width"},h,m,W,r=-1,f=[],e=[],P=[],y=[];N="init";this.elements={};m=g.dom||q;var H=g.root[0],U=g.trackActive,J=g.points,B=g.runners;h={stickingRadius:0,bumpRadius:B[0][p.offset],points:[],pointsPos:[0,10],runnersPos:[]};for(var v in h)g[v]===w&&(g[v]=h[v]);var l=g.pointsPos,s=g.runnersPos;v=g.runnersVal;var x,F,k=g.values;x=l[0];F=l[l.length-1];k||(k=l);for(h=0;h<k.length;h++)k[h]=+k[h];if(v&&!s.length)for(h=0;h<v.length;h++)s[h]=R(v[h]);s.length||(s=[x,F]);
L=Math.abs(F-x);var D=[],E=[],O;q(document).on("mouseup.rader blur.rader touchend.rader",function(){if(-1!=r){for(var a=0,d=f.length;a<d;a++)f[a]=t(e[a]);g.change&&g.change(X());Q(1)}r=-1});q(document).on("mousedown.rader touchstart.rader",function(a){W=z(a)});q(document).on("mousemove.rader touchmove.rader",function(a){-1!=r&&(V(a,0),Y())});this.pos=function(a,d){if(null!=d){var b=n(d);G(a,a,b);for(b=0;b<e.length;b++)f[b]=t(e[b]);I(1)}return f[a]};this.val=function(a,d){if(null!=d){var b=R(d),b=
n(b);G(a,a,b);for(b=0;b<e.length;b++)f[b]=t(e[b]);I(1)}return M(f[a])};this.invalidate=function(){Z();I(1);Y()};this.dispose=function(){q(document).off("rader");q(B).off("rader")};for(h=0;h<s.length;h++)q(B[h]).on("mousedown.rader touchstart.rader",function(a){return function(d){2!=d.button&&(d.preventDefault(),Q(),r=a)}}(h));(function(){u=H[p.a];f=s.slice();for(var a=0;a<s.length;a++)e[a]=n(f[a]);for(a=0;a<s.length;a++)K.pos(a,f[a]),e[a]=n(f[a])})();Z();V(0,1);N="ready";return this}var q=z.$,N;z.$.fn.rader=
function(g){g=g||{};g.root=g.root||this;return new K(g)}})(window);
