'use strict';(function(z,w){function L(g){function z(a){return a.clientX||(((a.originalEvent||a).touches||[])[0]||{}).pageX}function R(a){if(a)q(document).on("selectstart.rader",function(){return!1});else q(document).off("selectstart.rader")}function C(a){for(var d=-1/0,b=0,c=a.length;b<c;b++)d<a[b]&&(d=a[b]);return d}function A(a){for(var d=1/0,b=0,c=a.length;b<c;b++)d>a[b]&&(d=a[b]);return d}function D(a){100<a&&(a=100);0>a&&(a=0);return a}function n(a){E[a]===w&&(E[a]=D(100*((a-x)/M)));return E[a]}
function t(a){F[a]===w&&(F[a]=a/100*M+x);return F[a]}function N(a){var d=k[0],b=k[k.length-1];if(!k)return a;for(var c=0;l[c+1]&&!(a>=l[c]&&a<=l[c+1]);)c++;var e=l[c],h=l[c+1]||e,f=k[c],c=k[c+1]||f;0>=h-e&&(h=G,e=x);a="log"==g.scale?Math.exp((a-e)/(h-e)*(Math.log(c)-Math.log(f))+Math.log(f)):(a-e)/(h-e)*(c-f)+f;return a<d?d:a>b?b:a}function S(a){var d=l[0],b=l[l.length-1];if(!l)return a;for(var c=0;k[c+1]&&!(a>=k[c]&&a<=k[c+1]);)c++;c==k.length-1&&c--;var e=k[c],h=k[c+1],f=l[c],c=l[c+1];a="log"==
g.scale?(Math.log(a)-Math.log(e))/(Math.log(h)-Math.log(e))*(c-f)+f:(a-e)/(h-e)*(c-f)+f;return a<d?d:a>b?b:a}function T(a){for(var d=a,b,c,e=9999,g=0;g<l.length;g++)c=n(l[g]),b=Math.abs(c-a),b<e&&(d=c,e=b);return d}function U(a,d){var b,c,e,f=1/0,h=a;b=T(a);var k=100*g.stickingRadius/u;e=Math.abs(b-a);if(e>k)return a;for(var m=0;m<l.length;m++)b=n(l[m]),c=Math.abs(b-a),b*d>a*d&&c<f&&(f=c,h=b);if(f<k)return h;if(f>=k)return a=D(a-e*d+k*d),Math.abs(h-a)<k?h:a}function H(a,d,b){var c;if("init"==O)c=
1;else{c=e[a]||0;if(b>c)c=1;else if(b<c)c=-1;else return!1;b=D(b);a!=d&&(b=U(b,c))}var f=T(b),h=100*g.stickingRadius/u;f!==w&&f!==b&&Math.abs(f-b)<h&&(!P&&g.transCls&&(m(I).addClass(g.transCls),P=setTimeout(function(){m(I).removeClass(g.transCls);P=w},500)),b=f);f=100*g.bumpRadius/u;e[d+1*c]!==w&&(e[d+1*c]-b<f&&0<c||b-e[d+1*c]<f&&0>c)&&(a=H(a,d+1*c,b+c*f),b*c>(a-f*c)*c&&(b=U(a-f*c,-c)));e[d]=b;a={};a[p.start]=e[d]+"%";m(B[d]).css(a);return b}function J(a){if(g.pointInRangeCls){var d=y.slice(),b;for(b=
0;b<K.length;b++)n(l[b])>=e[0]&&n(l[b])<=e[e.length-1]?y[b]=1:y[b]=0;for(b=0;b<y.length;b++)if(y[b]!=d[b]||a)y[b]?m(K[b]).addClass(g.pointInRangeCls):m(K[b]).removeClass(g.pointInRangeCls)}a={};a[p.start]=A(e)+"%";a[p.size]=C(e)-A(e)+"%";m(V).css(a);if(g.onUpdate)g.onUpdate({minPos:A(e),maxPos:C(e),minVal:t(A(e)),maxVal:t(C(e))})}function W(a,d){if(a){for(var b=(z(a)-X)*(100/u),b=n(f[r])+b,c=0;c<e.length;c++)Q[c]=e[c];H(r,r,D(b))}a:if(e.length!=Q.length)b=!1;else{for(b=0;b<e.length;b++)if(e[b]!==
Q[b]){b=!1;break a}b=!0}b&&!d||J(d)}function Y(){var a=A(e),d=C(e),b=N(t(a)),c=N(t(d));g.collapseVals&&d-a<100*g.bumpRadius/u+1E-5&&(100==d?b=c:0==a?c=b:e[r]===a?c=b:b=c);return{minPos:a,maxPos:d,minVal:b,maxVal:c}}function Z(){g.move&&g.move(Y())}function $(){u=I[p.a];E=[];F=[];var a,d;for(d=0;d<l.length;d++)a={},a[p.start]=n(l[d])+"%",m(K[d]).css(a);for(d=0;d<f.length;d++)a={},e[d]=n(f[d]),a[p.start]=e[d]+"%",m(B[d]).css(a);d=n(f[0]);var b=n(f[f.length-1]);a={};a[p.start]=d+"%";a[p.size]=Math.abs(b-
d)+"%";m(V).css(a)}var L=this,M,u,p={start:"left",a:"clientWidth",offset:"offsetWidth",size:"width"},h,m,X,r=-1,f=[],e=[],Q=[],y=[];O="init";this.elements={};m=g.dom||q;var I=g.root[0],V=g.trackActive,K=g.points,B=g.runners;h={stickingRadius:0,bumpRadius:B[0][p.offset],points:[],pointsPos:[0,10],runnersPos:[]};for(var v in h)g[v]===w&&(g[v]=h[v]);var l=g.pointsPos,s=g.runnersPos;v=g.runnersVal;var x=g.start,G=g.end,k=g.values,x=l[0],G=l[l.length-1];k||(k=l);for(h=0;h<k.length;h++)k[h]=+k[h];if(v&&
!s.length)for(h=0;h<v.length;h++)s[h]=S(v[h]);s.length||(s=[x,G]);M=Math.abs(G-x);var E=[],F=[],P;q(document).on("mouseup.rader blur.rader touchend.rader",function(){if(-1!=r){for(var a=0,d=f.length;a<d;a++)f[a]=t(e[a]);g.change&&g.change(Y());R(1)}r=-1});q(document).on("mousedown.rader touchstart.rader",function(a){X=z(a)});q(document).on("mousemove.rader touchmove.rader",function(a){-1!=r&&(W(a,0),Z())});this.pos=function(a,d){if(null!=d){var b=n(d);H(a,a,b);for(b=0;b<e.length;b++)f[b]=t(e[b]);
J(1)}return f[a]};this.val=function(a,d){if(null!=d){var b=S(d),b=n(b);H(a,a,b);for(b=0;b<e.length;b++)f[b]=t(e[b]);J(1)}return N(f[a])};this.invalidate=function(){$();J(1);Z()};this.dispose=function(){q(document).off("rader");q(B).off("rader")};for(h=0;h<s.length;h++)q(B[h]).on("mousedown.rader touchstart.rader",function(a){return function(d){2!=d.button&&(d.preventDefault(),R(),r=a)}}(h));(function(){u=I[p.a];f=s.slice();for(var a=0;a<s.length;a++)e[a]=n(f[a]);for(a=0;a<s.length;a++)L.pos(a,f[a]),
e[a]=n(f[a])})();$();W(0,1);O="ready";return this}var q=z.$,O;z.$.fn.rader=function(g){g=g||{};g.root=g.root||this;return new L(g)}})(window);
