'use strict';(function(z,w){function L(f){function z(a){if(a)q(document).on("selectstart.rader",function(){return!1});else q(document).off("selectstart.rader")}function C(a){for(var c=-1/0,b=0,d=a.length;b<d;b++)c<a[b]&&(c=a[b]);return c}function A(a){for(var c=1/0,b=0,d=a.length;b<d;b++)c>a[b]&&(c=a[b]);return c}function D(a){100<a&&(a=100);0>a&&(a=0);return a}function n(a){E[a]===w&&(E[a]=D(100*((a-x)/M)));return E[a]}function t(a){F[a]===w&&(F[a]=a/100*M+x);return F[a]}function N(a){var c=k[0],
b=k[k.length-1];if(!k)return a;for(var d=0;l[d+1]&&!(a>=l[d]&&a<=l[d+1]);)d++;var e=l[d],h=l[d+1]||e,g=k[d],d=k[d+1]||g;0>=h-e&&(h=G,e=x);a="log"==f.scale?Math.exp((a-e)/(h-e)*(Math.log(d)-Math.log(g))+Math.log(g)):(a-e)/(h-e)*(d-g)+g;return a<c?c:a>b?b:a}function Q(a){var c=l[0],b=l[l.length-1];if(!l)return a;for(var d=0;k[d+1]&&!(a>=k[d]&&a<=k[d+1]);)d++;d==k.length-1&&d--;var e=k[d],h=k[d+1],g=l[d],d=l[d+1];a="log"==f.scale?(Math.log(a)-Math.log(e))/(Math.log(h)-Math.log(e))*(d-g)+g:(a-e)/(h-e)*
(d-g)+g;return a<c?c:a>b?b:a}function R(a){for(var c=a,b,d,e=9999,f=0;f<l.length;f++)d=n(l[f]),b=Math.abs(d-a),b<e&&(c=d,e=b);return c}function S(a,c){var b,d,e,g=1/0,h=a;b=R(a);var k=100*f.stickingRadius/u;e=Math.abs(b-a);if(e>k)return a;for(var m=0;m<l.length;m++)b=n(l[m]),d=Math.abs(b-a),b*c>a*c&&d<g&&(g=d,h=b);if(g<k)return h;if(g>=k)return a=D(a-e*c+k*c),Math.abs(h-a)<k?h:a}function H(a,c,b){var d;d=e[a]||0;if(b>d)d=1;else if(b<d)d=-1;else return!1;b=D(b);a!=c&&(b=S(b,d));var g=R(b),h=100*f.stickingRadius/
u;g!==w&&g!==b&&Math.abs(g-b)<h&&(!O&&f.transCls&&(m(I).addClass(f.transCls),O=setTimeout(function(){m(I).removeClass(f.transCls);O=w},500)),b=g);g=100*f.bumpRadius/u;e[c+1*d]!==w&&(e[c+1*d]-b<g&&0<d||b-e[c+1*d]<g&&0>d)&&(a=H(a,c+1*d,b+d*g),b*d>(a-g*d)*d&&(b=S(a-g*d,-d)));e[c]=b;a={};a[p.start]=e[c]+"%";m(B[c]).css(a);return b}function J(a){if(f.pointInRangeCls){var c=y.slice(),b;for(b=0;b<K.length;b++)n(l[b])>=e[0]&&n(l[b])<=e[e.length-1]?y[b]=1:y[b]=0;for(b=0;b<y.length;b++)if(y[b]!=c[b]||a)y[b]?
m(K[b]).addClass(f.pointInRangeCls):m(K[b]).removeClass(f.pointInRangeCls)}a={};a[p.start]=A(e)+"%";a[p.size]=C(e)-A(e)+"%";m(T).css(a);if(f.onUpdate)f.onUpdate({minPos:A(e),maxPos:C(e),minVal:t(A(e)),maxVal:t(C(e))})}function U(a,c){if(a){for(var b=(a.clientX-V)*(100/u),b=n(g[r])+b,d=0;d<e.length;d++)P[d]=e[d];H(r,r,D(b))}a:if(e.length!=P.length)b=!1;else{for(b=0;b<e.length;b++)if(e[b]!==P[b]){b=!1;break a}b=!0}b&&!c||J(c)}function W(){var a=A(e),c=C(e),b=N(t(a)),d=N(t(c));f.collapseVals&&c-a<100*
f.bumpRadius/u+1E-5&&(100==c?b=d:0==a?d=b:e[r]===a?d=b:b=d);return{minPos:a,maxPos:c,minVal:b,maxVal:d}}function X(){f.move&&f.move(W())}function Y(){u=I[p.a];E=[];F=[];var a,c;for(c=0;c<l.length;c++)a={},a[p.start]=n(l[c])+"%",m(K[c]).css(a);for(c=0;c<g.length;c++)a={},e[c]=n(g[c]),a[p.start]=e[c]+"%",m(B[c]).css(a);c=n(g[0]);var b=n(g[g.length-1]);a={};a[p.start]=c+"%";a[p.size]=Math.abs(b-c)+"%";m(T).css(a)}var L=this,M,u,p={start:"left",a:"clientWidth",offset:"offsetWidth",size:"width"},h,m,V,
r=-1,g=[],e=[],P=[],y=[];this.elements={};m=f.dom||q;var I=f.root[0],T=f.trackActive,K=f.points,B=f.runners;h={stickingRadius:0,bumpRadius:B[0][p.offset],points:[],pointsPos:[0,10],runnersPos:[]};for(var v in h)f[v]===w&&(f[v]=h[v]);var l=f.pointsPos,s=f.runnersPos;v=f.runnersVal;var x=f.start,G=f.end,k=f.values,x=l[0],G=l[l.length-1];k||(k=l);for(h=0;h<k.length;h++)k[h]=+k[h];if(v&&!s.length)for(h=0;h<v.length;h++)s[h]=Q(v[h]);s.length||(s=[x,G]);M=Math.abs(G-x);var E=[],F=[],O;q(document).on("mouseup.rader blur.rader",
function(){if(-1!=r){for(var a=0,c=g.length;a<c;a++)g[a]=t(e[a]);f.change&&f.change(W());z(1)}r=-1});q(document).on("mousedown.rader",function(a){V=a.clientX});q(document).on("mousemove.rader",function(a){-1!=r&&(U(a,0),X())});this.pos=function(a,c){if(null!=c){var b=n(c);H(a,a,b);for(b=0;b<e.length;b++)g[b]=t(e[b]);J(1)}return g[a]};this.val=function(a,c){if(null!=c){var b=Q(c),b=n(b);H(a,a,b);for(b=0;b<e.length;b++)g[b]=t(e[b]);J(1)}return N(g[a])};this.invalidate=function(){Y();J(1);X()};this.dispose=
function(){q(document).off("rader");q(B).off("rader")};for(h=0;h<s.length;h++)q(B[h]).on("mousedown.rader",function(a){return function(c){2!=c.button&&(c.preventDefault(),z(),r=a)}}(h));(function(){u=I[p.a];g=s.slice();for(var a=0;a<s.length;a++)e[a]=a;e[a-1]=100;for(a=0;a<s.length;a++)L.pos(a,g[a]),e[a]=n(g[a])})();Y();U(0,1);return this}var q=z.$;z.$.fn.rader=function(f){f=f||{};f.root=f.root||this;return new L(f)}})(window);
